import{onBlur}from"../display/focus.js";import{on}from"../util/event.js";function forEachCodeMirror(e){if(!document.getElementsByClassName)return;let o=document.getElementsByClassName("CodeMirror"),r=[];for(let e=0;e<o.length;e++){let l=o[e].CodeMirror;l&&r.push(l)}r.length&&r[0].operation((()=>{for(let o=0;o<r.length;o++)e(r[o])}))}let globalsRegistered=!1;export function ensureGlobalHandlers(){globalsRegistered||(registerGlobalHandlers(),globalsRegistered=!0)}function registerGlobalHandlers(){let e;on(window,"resize",(()=>{null==e&&(e=setTimeout((()=>{e=null,forEachCodeMirror(onResize)}),100))})),on(window,"blur",(()=>forEachCodeMirror(onBlur)))}function onResize(e){let o=e.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,e.setSize()}